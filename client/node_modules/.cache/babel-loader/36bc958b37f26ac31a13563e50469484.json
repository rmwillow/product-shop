{"ast":null,"code":"var parse = require('ret');\n\nvar types = parse.types;\n\nmodule.exports = function (re, opts) {\n  if (!opts) opts = {};\n  var replimit = opts.limit === undefined ? 25 : opts.limit;\n  if (isRegExp(re)) re = re.source;else if (typeof re !== 'string') re = String(re);\n\n  try {\n    re = parse(re);\n  } catch (err) {\n    return false;\n  }\n\n  var reps = 0;\n  return function walk(node, starHeight) {\n    if (node.type === types.REPETITION) {\n      starHeight++;\n      reps++;\n      if (starHeight > 1) return false;\n      if (reps > replimit) return false;\n    }\n\n    if (node.options) {\n      for (var i = 0, len = node.options.length; i < len; i++) {\n        var ok = walk({\n          stack: node.options[i]\n        }, starHeight);\n        if (!ok) return false;\n      }\n    }\n\n    var stack = node.stack || node.value && node.value.stack;\n    if (!stack) return true;\n\n    for (var i = 0; i < stack.length; i++) {\n      var ok = walk(stack[i], starHeight);\n      if (!ok) return false;\n    }\n\n    return true;\n  }(re, 0);\n};\n\nfunction isRegExp(x) {\n  return {}.toString.call(x) === '[object RegExp]';\n}","map":{"version":3,"sources":["/Users/rachelmcgrath/Desktop/projects/product-shop/client/node_modules/safe-regex/index.js"],"names":["parse","require","types","module","exports","re","opts","replimit","limit","undefined","isRegExp","source","String","err","reps","walk","node","starHeight","type","REPETITION","options","i","len","length","ok","stack","value","x","toString","call"],"mappings":"AAAA,IAAIA,KAAK,GAAGC,OAAO,CAAC,KAAD,CAAnB;;AACA,IAAIC,KAAK,GAAGF,KAAK,CAACE,KAAlB;;AAEAC,MAAM,CAACC,OAAP,GAAiB,UAAUC,EAAV,EAAcC,IAAd,EAAoB;AACjC,MAAI,CAACA,IAAL,EAAWA,IAAI,GAAG,EAAP;AACX,MAAIC,QAAQ,GAAGD,IAAI,CAACE,KAAL,KAAeC,SAAf,GAA2B,EAA3B,GAAgCH,IAAI,CAACE,KAApD;AAEA,MAAIE,QAAQ,CAACL,EAAD,CAAZ,EAAkBA,EAAE,GAAGA,EAAE,CAACM,MAAR,CAAlB,KACK,IAAI,OAAON,EAAP,KAAc,QAAlB,EAA4BA,EAAE,GAAGO,MAAM,CAACP,EAAD,CAAX;;AAEjC,MAAI;AAAEA,IAAAA,EAAE,GAAGL,KAAK,CAACK,EAAD,CAAV;AAAgB,GAAtB,CACA,OAAOQ,GAAP,EAAY;AAAE,WAAO,KAAP;AAAc;;AAE5B,MAAIC,IAAI,GAAG,CAAX;AACA,SAAQ,SAASC,IAAT,CAAeC,IAAf,EAAqBC,UAArB,EAAiC;AACrC,QAAID,IAAI,CAACE,IAAL,KAAchB,KAAK,CAACiB,UAAxB,EAAoC;AAChCF,MAAAA,UAAU;AACVH,MAAAA,IAAI;AACJ,UAAIG,UAAU,GAAG,CAAjB,EAAoB,OAAO,KAAP;AACpB,UAAIH,IAAI,GAAGP,QAAX,EAAqB,OAAO,KAAP;AACxB;;AAED,QAAIS,IAAI,CAACI,OAAT,EAAkB;AACd,WAAK,IAAIC,CAAC,GAAG,CAAR,EAAWC,GAAG,GAAGN,IAAI,CAACI,OAAL,CAAaG,MAAnC,EAA2CF,CAAC,GAAGC,GAA/C,EAAoDD,CAAC,EAArD,EAAyD;AACrD,YAAIG,EAAE,GAAGT,IAAI,CAAC;AAAEU,UAAAA,KAAK,EAAET,IAAI,CAACI,OAAL,CAAaC,CAAb;AAAT,SAAD,EAA6BJ,UAA7B,CAAb;AACA,YAAI,CAACO,EAAL,EAAS,OAAO,KAAP;AACZ;AACJ;;AACD,QAAIC,KAAK,GAAGT,IAAI,CAACS,KAAL,IAAeT,IAAI,CAACU,KAAL,IAAcV,IAAI,CAACU,KAAL,CAAWD,KAApD;AACA,QAAI,CAACA,KAAL,EAAY,OAAO,IAAP;;AAEZ,SAAK,IAAIJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGI,KAAK,CAACF,MAA1B,EAAkCF,CAAC,EAAnC,EAAuC;AACnC,UAAIG,EAAE,GAAGT,IAAI,CAACU,KAAK,CAACJ,CAAD,CAAN,EAAWJ,UAAX,CAAb;AACA,UAAI,CAACO,EAAL,EAAS,OAAO,KAAP;AACZ;;AAED,WAAO,IAAP;AACH,GAvBM,CAuBJnB,EAvBI,EAuBA,CAvBA,CAAP;AAwBH,CAnCD;;AAqCA,SAASK,QAAT,CAAmBiB,CAAnB,EAAsB;AAClB,SAAO,GAAGC,QAAH,CAAYC,IAAZ,CAAiBF,CAAjB,MAAwB,iBAA/B;AACH","sourcesContent":["var parse = require('ret');\nvar types = parse.types;\n\nmodule.exports = function (re, opts) {\n    if (!opts) opts = {};\n    var replimit = opts.limit === undefined ? 25 : opts.limit;\n    \n    if (isRegExp(re)) re = re.source;\n    else if (typeof re !== 'string') re = String(re);\n    \n    try { re = parse(re) }\n    catch (err) { return false }\n    \n    var reps = 0;\n    return (function walk (node, starHeight) {\n        if (node.type === types.REPETITION) {\n            starHeight ++;\n            reps ++;\n            if (starHeight > 1) return false;\n            if (reps > replimit) return false;\n        }\n        \n        if (node.options) {\n            for (var i = 0, len = node.options.length; i < len; i++) {\n                var ok = walk({ stack: node.options[i] }, starHeight);\n                if (!ok) return false;\n            }\n        }\n        var stack = node.stack || (node.value && node.value.stack);\n        if (!stack) return true;\n        \n        for (var i = 0; i < stack.length; i++) {\n            var ok = walk(stack[i], starHeight);\n            if (!ok) return false;\n        }\n        \n        return true;\n    })(re, 0);\n};\n\nfunction isRegExp (x) {\n    return {}.toString.call(x) === '[object RegExp]';\n}\n"]},"metadata":{},"sourceType":"script"}