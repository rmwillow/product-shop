{"ast":null,"code":"var _jsxFileName = \"/Users/rachelmcgrath/Desktop/projects/product-shop/client/src/Pages/Product.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Row, Col, Image, ListGroup, Card } from \"react-bootstrap\";\nimport * as productAction from \"../Actions/productAction\";\nimport ErrorMessage from \"../Components/Message/errorMessage\";\nimport ProductReview from \"../Components/ProductReview/ProductReview\";\nimport Rating from \"../Components/Rating/Rating\";\nimport { Select, Button, FormControl, makeStyles, MenuItem } from \"@material-ui/core/\";\nimport * as productConstants from \"../Constants/productConstants\";\nimport { addToCart } from \"../Actions/cartAction\";\nconst useStyles = makeStyles(theme => ({\n  typography: {\n    padding: theme.spacing(2)\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 85,\n    top: -17,\n    left: 6,\n    position: \"absolute\"\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2)\n  }\n}));\n\nconst ProductDetails = ({\n  match,\n  history\n}) => {\n  const [qty, setQty] = useState(1);\n  const [initialLoading, setInitialLoading] = useState(true);\n  const productData = useSelector(state => state.Product);\n  const reviewResponses = useSelector(state => state.createReview);\n  const {\n    error: createReviewError\n  } = reviewResponses;\n  const {\n    loading,\n    product,\n    error,\n    success\n  } = productData;\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(productAction.product(match.params.productId, initialLoading)); // eslint-disable-next-line\n  }, [dispatch, match]);\n  useEffect(() => {\n    if (success && initialLoading) {\n      setInitialLoading(false);\n    } // eslint-disable-next-line\n\n  }, [dispatch, success]);\n\n  const addToCartHandler = () => {\n    dispatch(addToCart(match.params.productId, qty));\n    history.push(\"/cart\");\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, createReviewError && /*#__PURE__*/React.createElement(ErrorMessage, {\n    header: \"Opps!!!\",\n    message: createReviewError,\n    reset: productConstants.CREATE_REVIEW_RESET,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Link, {\n    className: \"btn btn-light my-3\",\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }, \"Go Back\"), loading ? /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, \"Loadiong...\") : error ? /*#__PURE__*/React.createElement(ErrorMessage, {\n    header: \"Something went wrong\",\n    message: error,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Image, {\n    src: `http://localhost:5000/${product.productImage}`,\n    alt: product.name,\n    fluid: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    md: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup, {\n    variant: \"flush\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 19\n    }\n  }, product.name)), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Rating, {\n    value: product.averageRating,\n    text: `${product.Reviews ? product.Reviews.length : 0} reviews`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }\n  }, \"Price: $\", product.price), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }, \"Description: \", product.description))), /*#__PURE__*/React.createElement(Col, {\n    md: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup, {\n    variant: \"flush\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 23\n    }\n  }, \"Price:\"), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 25\n    }\n  }, \"$\", product.price)))), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 23\n    }\n  }, \"Status:\"), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 23\n    }\n  }, product.countInStock > 0 ? \"In Stock\" : \"Out Of Stock\"))), product.countInStock > 0 && /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 25\n    }\n  }, \"Qty\"), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(FormControl, {\n    className: classes.formControl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    labelId: \"demo-simple-select-label\",\n    id: \"demo-simple-select\",\n    onChange: e => setQty(e.target.value),\n    label: \"Qty\",\n    value: qty,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 29\n    }\n  }, [...Array(product.countInStock).keys()].map(x => /*#__PURE__*/React.createElement(MenuItem, {\n    key: x + 1,\n    value: x + 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 35\n    }\n  }, x + 1))))))), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: addToCartHandler,\n    fullWidth: true,\n    disabled: product.countInStock === 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 21\n    }\n  }, \"Add To Cart\")))))), /*#__PURE__*/React.createElement(ProductReview, {\n    productId: match.params.productId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 11\n    }\n  })));\n};\n\nexport default ProductDetails;","map":{"version":3,"sources":["/Users/rachelmcgrath/Desktop/projects/product-shop/client/src/Pages/Product.js"],"names":["React","useEffect","useState","Link","useDispatch","useSelector","Row","Col","Image","ListGroup","Card","productAction","ErrorMessage","ProductReview","Rating","Select","Button","FormControl","makeStyles","MenuItem","productConstants","addToCart","useStyles","theme","typography","padding","spacing","formControl","margin","minWidth","top","left","position","selectEmpty","marginTop","ProductDetails","match","history","qty","setQty","initialLoading","setInitialLoading","productData","state","Product","reviewResponses","createReview","error","createReviewError","loading","product","success","classes","dispatch","params","productId","addToCartHandler","push","CREATE_REVIEW_RESET","productImage","name","averageRating","Reviews","length","price","description","countInStock","e","target","value","Array","keys","map","x"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Row, Col, Image, ListGroup, Card } from \"react-bootstrap\";\nimport * as productAction from \"../Actions/productAction\";\nimport ErrorMessage from \"../Components/Message/errorMessage\";\nimport ProductReview from \"../Components/ProductReview/ProductReview\";\nimport Rating from \"../Components/Rating/Rating\";\nimport {\n  Select,\n  Button,\n  FormControl,\n  makeStyles,\n  MenuItem,\n} from \"@material-ui/core/\";\nimport * as productConstants from \"../Constants/productConstants\";\nimport { addToCart } from \"../Actions/cartAction\";\n\nconst useStyles = makeStyles((theme) => ({\n  typography: {\n    padding: theme.spacing(2),\n  },\n\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 85,\n    top: -17,\n    left: 6,\n    position: \"absolute\",\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n}));\n\nconst ProductDetails = ({ match, history }) => {\n  const [qty, setQty] = useState(1);\n  const [initialLoading, setInitialLoading] = useState(true);\n\n  const productData = useSelector((state) => state.Product);\n  const reviewResponses = useSelector((state) => state.createReview);\n\n  const {error:createReviewError} = reviewResponses\n\n  const { loading, product, error, success } = productData;\n  const classes = useStyles();\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(productAction.product(match.params.productId, initialLoading));\n    // eslint-disable-next-line\n  }, [dispatch, match]);\n\n  useEffect(() => {\n    if (success && initialLoading) {\n      setInitialLoading(false);\n    }\n    // eslint-disable-next-line\n  }, [dispatch, success]);\n\n  const addToCartHandler = () => {\n    dispatch(addToCart(match.params.productId,qty))\n    history.push(\"/cart\");\n  };\n\n  return (\n    <>\n     {createReviewError && (\n        <ErrorMessage header=\"Opps!!!\" message={createReviewError} reset={productConstants.CREATE_REVIEW_RESET} />\n      )}\n      <Link className=\"btn btn-light my-3\" to=\"/\">\n        Go Back\n      </Link>\n      {loading ? (\n        <p>Loadiong...</p>\n      ) : error ? (\n        <ErrorMessage header=\"Something went wrong\" message={error} />\n      ) : (\n        <>\n          <Row>\n            <Col md={6}>\n              <Image\n                src={`http://localhost:5000/${product.productImage}`}\n                alt={product.name}\n                fluid\n              />\n            </Col>\n            <Col md={3}>\n              <ListGroup variant=\"flush\">\n                <ListGroup.Item>\n                  <h3>{product.name}</h3>\n                </ListGroup.Item>\n                <ListGroup.Item>\n                  <Rating\n                    value={product.averageRating}\n                    text={`${\n                      product.Reviews ? product.Reviews.length : 0\n                    } reviews`}\n                  />\n                </ListGroup.Item>\n                <ListGroup.Item>Price: ${product.price}</ListGroup.Item>\n                <ListGroup.Item>\n                  Description: {product.description}\n                </ListGroup.Item>\n              </ListGroup>\n            </Col>\n            <Col md={3}>\n              <Card>\n                <ListGroup variant=\"flush\">\n                  <ListGroup.Item>\n                    <Row>\n                      <Col>Price:</Col>\n                      <Col>\n                        <strong>${product.price}</strong>\n                      </Col>\n                    </Row>\n                  </ListGroup.Item>\n\n                  <ListGroup.Item>\n                    <Row>\n                      <Col>Status:</Col>\n                      <Col>\n                        {product.countInStock > 0 ? \"In Stock\" : \"Out Of Stock\"}\n                      </Col>\n                    </Row>\n                  </ListGroup.Item>\n\n                  {product.countInStock > 0 && (\n                    <ListGroup.Item>\n                      <Row>\n                        <Col>Qty</Col>\n                        <Col>\n                          <FormControl className={classes.formControl}>\n                            <Select\n                              labelId=\"demo-simple-select-label\"\n                              id=\"demo-simple-select\"\n                              onChange={(e) => setQty(e.target.value)}\n                              label=\"Qty\"\n                              value={qty}\n                            >\n                              {[...Array(product.countInStock).keys()].map(\n                                (x) => (\n                                  <MenuItem key={x + 1} value={x + 1}>\n                                    {x + 1}\n                                  </MenuItem>\n                                )\n                              )}\n                            </Select>\n                          </FormControl>\n                        </Col>\n                      </Row>\n                    </ListGroup.Item>\n                  )}\n\n                  <ListGroup.Item>\n                    <Button\n                      variant=\"contained\"\n                      color=\"primary\"\n                      onClick={addToCartHandler}\n                      fullWidth\n                      disabled={product.countInStock === 0}\n                    >\n                      Add To Cart\n                    </Button>\n                  </ListGroup.Item>\n                </ListGroup>\n              </Card>\n            </Col>\n          </Row>\n          <ProductReview productId={match.params.productId} />\n        </>\n      )}\n    </>\n  );\n};\nexport default ProductDetails;"]},"metadata":{},"sourceType":"module"}